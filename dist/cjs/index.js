"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},defaultValues={excludePath:[],dev:!1,hash:!1,domain:null,params:{}};function VantevoAnalytics(e){var t=defaultValues,r=(t=e?__assign(__assign({},defaultValues),e):t).dev,n=t.hash,s=t.excludePath,l=t.params,u=t.domain;var i=function(e,t,n){if(!(window.__phantomas||window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress))if(r||!/^localhost(.*)$|^127(\.[0-9]{1,3}){3}$/i.test(location.hostname)&&"file:"!==location.protocol){var i=function(){var e=window.location.pathname.split("?")[0];if(0<s.length){for(var t=!1,n=0;n<s.length;n++){var i=s[n];if(0<=(i="*"==(i="**"==i.substring(i.length-2)?i.slice(0,-2)+"(.*?)$":i).substring(i.length-1)?i.slice(0,-1)+"[^/]*/?$":i).indexOf("/*"))i=i.split("/*").join("/[^/]*?");else{if(i==e||i+"/"==e){t=!0;break}i.indexOf("*")<0&&(i="^"+i+"$")}if("$"!=(i="^"!=i.substring(0,1)?"^"+i:i).substring(i.length-1)&&(i+="$"),new RegExp(i).test(e)){t=!0;break}}if(t)return!0}return!1}();if(!i){var o,i={},a="",i=(u&&(i=__assign(__assign({},l),{domain:u})),o=i,i=Object.fromEntries(Object.entries(o).filter(function(e){return e[0],null!=e[1]})),a=Object.keys(i).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])}).join("&"),{type:"pageview",ts:(new Date).getTime(),url:location.href,t:document.title,ref:document.referrer,w:screen.width,h:screen.height,params:a,e_n:null,e_m:null});if(e&&"pageview"==e&&(i.url=t.url?location.origin+""+t.url:i.url,i.t=t&&t.title?t.title.toString():i.t,i.e_n=e,t&&t[404]&&(i.params=a?a+"&404=1":"404=1")),e&&"pageview"!=e&&(i.type="event",i.e_n=e,i.e_m=t||{}),r)return console.log("SUCCESS HIT!",JSON.stringify(i)),n&&n();a=new XMLHttpRequest;a.open("POST","https://api.vantevo.io/event"),a.setRequestHeader("Content-Type","text/plain"),a.send(JSON.stringify(i)),a.onreadystatechange=function(e){4==e.readyState&&n&&n()}}}else console.warn("Ignores hit on localhost.")};function o(){location.hash&&!n||i("pageview",{},null)}function a(e){for(var t=e.target,n="auxclick"==e.type&&2==e.which,i="click"==e.type;t&&(void 0===t.tagName||"a"!=t.tagName.toLowerCase()||!t.href);)t=t.parentNode;t&&t.href&&t.host&&t.host!==location.host&&((n||i)&&e("Outbound Link",{url:t.href},null),t.target&&!t.target.match(/^_(self|parent|top)$/i)||e.ctrlKey||e.metaKey||e.shiftKey||!i||(setTimeout(function(){location.href=t.href},150),e.preventDefault()))}return{vantevo:i,enableTracker:function(){var e=window.history.pushState;return e&&(window.history.pushState=function(){e.apply(this,arguments),o()},window.addEventListener("popstate",o)),document.body?o():window.addEventListener("DOMContentLoaded",o),function(){e&&(window.history.pushState=e,window.removeEventListener("popstate",o))}},enableOutboundLink:function(){return window.addEventListener("click",a),window.addEventListener("auxclick",a),function(){window.removeEventListener("click",a),window.removeEventListener("auxclick",a)}}}}module.exports=VantevoAnalytics;
//# sourceMappingURL=index.js.map
