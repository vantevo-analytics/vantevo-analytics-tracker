var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},defaultValues={excludePath:[],dev:!1,hash:!1,domain:null,params:{}};function VantevoAnalytics(e){var t=defaultValues,l=(t=e?__assign(__assign({},defaultValues),e):t).dev,u=t.hash,d=t.excludePath,w=t.params,f=t.domain,p="Ignores hit on localhost.";function h(e){return/^localhost(.*)$|^127(\.[0-9]{1,3}){3}$/i.test(e)}var n,v=function(e,t,n){if(void 0===t&&(t={}),!(window.__phantomas||window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)){var i="file:"===window.location.protocol;if(f&&(h(f)||i))return console.warn(p);if(!f&&!l&&(h(window.location.hostname)||i))return console.warn(p);if((!e||"pageview"==e)&&0<d.length)for(var o=window.location.pathname.split("?")[0],a=0;a<d.length;a++)if(new RegExp("^"+d[a].trim().replace(/\*\*/g,".*").replace(/([^\.])\*/g,"$1[^\\s/]*")+"/?$").test(o))return!!l&&console.warn("Exclude page");var r,i={},s="",c=(f&&(i=__assign(__assign({},w),{domain:f})),u&&(i=__assign(__assign({},i),{hash:!0})),e&&"pageview"==e&&t&&t.path&&(i=__assign(__assign({},i),{path:t.path})),document.title),i=(e&&"pageview"!=e||!t||!t.title||(c=t.title),r=i,i=Object.fromEntries(Object.entries(r).filter(function(e){return e[0],null!=e[1]})),s=Object.keys(i).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])}).join("&"),{ts:(new Date).getTime(),url:window.location.href,t:c,ref:document.referrer,w:screen.width,h:screen.height,params:s,e_n:e||"pageview",e_m:t||{}});if(l)return console.log("SUCCESS HIT!",JSON.stringify(i)),n&&n();c=new XMLHttpRequest;c.open("POST","https://api.vantevo.io/event"),c.setRequestHeader("Content-Type","text/plain"),c.send(JSON.stringify(i)),c.onreadystatechange=function(e){4==e.readyState&&n&&n()}}};function i(){!u&&n===window.location.pathname||(n=window.location.pathname,v("pageview",{},null))}function o(e){for(var t=e.target,n="auxclick"==e.type&&2==e.which,i="click"==e.type;t&&(void 0===t.tagName||"a"!=t.tagName.toLowerCase()||!t.href);)t=t.parentNode;t&&t.href&&t.host&&t.host!==window.location.host&&((n||i)&&v("Outbound Link",{url:t.href},null),t.target&&!t.target.match(/^_(self|parent|top)$/i)||e.ctrlKey||e.metaKey||e.shiftKey||!i||(setTimeout(function(){window.location.href=t.href},150),e.preventDefault()))}function a(e,t,n){for(var i=e.target,o="auxclick"==e.type&&2==e.which,a="click"==e.type;i&&(void 0===i.tagName||"a"!=i.tagName.toLowerCase()||!i.href);)i=i.parentNode;var r,s,c=!1;i&&i.href&&(r=[],t&&(r=t.replace(/\s/g,"").split(",")),(o||a)&&0<r.length&&(s=i.href.split(".").pop(),r.some(function(e){return e==s})&&(t={url:i.href},n&&(t.extension=s),v("File Download",t,null),c=!0))),!c||i.target&&!i.target.match(/^_(self|parent|top)$/i)||e.ctrlKey||e.metaKey||e.shiftKey||!a||(setTimeout(function(){window.location.href=i.href},150),e.preventDefault())}return{vantevo:v,enableTracker:function(){var e=window.history.pushState;return e&&(window.history.pushState=function(){e.apply(this,arguments),setTimeout(i,0)},window.addEventListener("popstate",function(){setTimeout(i,0)})),document.body?i():window.addEventListener("DOMContentLoaded",i),function(){e&&(window.history.pushState=e,window.removeEventListener("popstate",i))}},enableTrackFiles:function(t,n){return void 0===t&&(t=""),void 0===n&&(n=!1),window.addEventListener("click",function(e){a(e,t,n)}),window.addEventListener("auxclick",function(e){a(e,t,n)}),function(){window.removeEventListener("click",function(e){a(e,t,n)}),window.removeEventListener("auxclick",function(e){a(e,t,n)})}},enableOutboundLink:function(){return window.addEventListener("click",o),window.addEventListener("auxclick",o),function(){window.removeEventListener("click",o),window.removeEventListener("auxclick",o)}}}}export{VantevoAnalytics as default};
//# sourceMappingURL=index.js.map
